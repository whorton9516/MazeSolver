(()=>{"use strict";var t={409:function(t,e,i){var l=this&&this.__awaiter||function(t,e,i,l){return new(i||(i=Promise))((function(n,o){function s(t){try{a(l.next(t))}catch(t){o(t)}}function r(t){try{a(l.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,r)}a((l=l.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Maze=void 0;const n=i(503),o=i(643);e.Maze=class{constructor(t,e,i){this.cols=t,this.rows=e,this.cellSize=i,this.grid=[],this.isSolved=!1;for(let i=0;i<e;i++)for(let e=0;e<t;e++)this.grid.push(new n.Cell(e,i));this.entrance=this.getCell(0,0),this.exit=this.getCell(t-1,e-1)}getCell(t,e){return t<0||e<0||t>=this.cols||e>=this.rows?null:this.grid[t+e*this.cols]}getUnvisitedNeighbors(t){const e=[],{x:i,y:l}=t,n=this.getCell(i,l-1),o=this.getCell(i+1,l),s=this.getCell(i,l+1),r=this.getCell(i-1,l);return n&&!n.visited&&e.push(n),o&&!o.visited&&e.push(o),s&&!s.visited&&e.push(s),r&&!r.visited&&e.push(r),e}removeWalls(t,e){const i=t.x-e.x,l=t.y-e.y;1===i?(t.walls.left=!1,e.walls.right=!1):-1===i&&(t.walls.right=!1,e.walls.left=!1),1===l?(t.walls.top=!1,e.walls.bottom=!1):-1===l&&(t.walls.bottom=!1,e.walls.top=!1)}generateMaze(){var t,e;const i=[],l=this.entrance;l.visited=!0,i.push(l);const n=null===(t=this.getEntranceCell())||void 0===t?void 0:t.root.data;n&&(n.isEntrance=!0);const o=null===(e=this.getExitCell())||void 0===e?void 0:e.root.data;for(o&&(o.isExit=!0);i.length>0;){const t=i[i.length-1],e=this.getUnvisitedNeighbors(t);if(e.length>0){const l=e[Math.floor(Math.random()*e.length)];l.visited=!0,this.removeWalls(t,l),i.push(l)}else i.pop()}this.grid.forEach((t=>t.visited=!1))}getEntranceCell(){return new o.CellNode(this.entrance)}getExitCell(){return new o.CellNode(this.exit)}isEntrance(t){var e;let i=null===(e=this.getEntranceCell())||void 0===e?void 0:e.root.data;return t.x==(null==i?void 0:i.x)&&t.y==i.y}isExit(t){var e;let i=null===(e=this.getExitCell())||void 0===e?void 0:e.root.data;return t.x==(null==i?void 0:i.x)&&t.y==i.y}findSolution(t,e,i){return l(this,void 0,void 0,(function*(){if(i.cancelled)return!1;if(0===t.length)return!1;const l=[];for(const n of t){const t=n.root.data;if(t.isSearched)continue;if(t.isSearched=!0,t.highlighted=!0,this.isExit(t)){i.cancelled=!0;let t=n;for(;t;)t.root.data.isSolution=!0,t=t.parent;return yield e(),!0}const s=[{dx:1,dy:0,wall:"right"},{dx:0,dy:1,wall:"bottom"},{dx:-1,dy:0,wall:"left"},{dx:0,dy:-1,wall:"top"}];for(const{dx:e,dy:i,wall:r}of s)if(!t.walls[r]){const s=this.getCell(t.x+e,t.y+i);if(s&&!s.isSearched){const t=new o.CellNode(s);t.parent=n,l.push(t)}}}return yield e(),yield this.findSolution(l,e,i)}))}}},503:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=void 0,e.Cell=class{constructor(t,e){this.x=t,this.y=e,this.walls={top:!0,right:!0,bottom:!0,left:!0},this.visited=!1,this.isSearched=!1,this.isSolution=!1,this.isEntrance=!1,this.isExit=!1,this.highlighted=!1}}},643:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellNode=void 0,e.CellNode=class{constructor(t,e=null){this.root={data:t},this.parent=e}}},697:function(t,e,i){var l=this&&this.__awaiter||function(t,e,i,l){return new(i||(i=Promise))((function(n,o){function s(t){try{a(l.next(t))}catch(t){o(t)}}function r(t){try{a(l.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,r)}a((l=l.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=i(409),o=document.getElementById("mazeCanvas"),s=o.getContext("2d");if(!s)throw new Error("Failed to get 2D context");const r=20,a=Math.floor(o.width/r),d=Math.floor(o.height/r),h={cancelled:!1},c=document.getElementById("generateButton"),u=document.getElementById("solveButton"),g=document.getElementById("timerLabel");let f=0,v=new n.Maze(a,d,r);function y(){return l(this,void 0,void 0,(function*(){for(let t=0;t<d;t++)for(let e=0;e<a;e++){const i=v.getCell(e,t),l=e*r,n=t*r;i&&s&&(i.isSolution?s.fillStyle="lightgreen":i.isSearched?s.fillStyle="lightgrey":i.highlighted?s.fillStyle="darkgrey":s.fillStyle="white",i.isEntrance?s.fillStyle="green":i.isExit&&(s.fillStyle="red"),s.fillRect(l,n,r,r),i.walls.top&&(s.beginPath(),s.lineWidth=0===t?4:2,s.moveTo(l,n),s.lineTo(l+r,n),s.stroke()),i.walls.right&&(s.beginPath(),s.lineWidth=e===a-1?4:2,s.moveTo(l+r,n),s.lineTo(l+r,n+r),s.stroke()),i.walls.bottom&&(s.beginPath(),s.lineWidth=t===d-1?4:2,s.moveTo(l+r,n+r),s.lineTo(l,n+r),s.stroke()),i.walls.left&&(s.beginPath(),s.lineWidth=0===e?4:2,s.moveTo(l,n+r),s.lineTo(l,n),s.stroke()))}yield new Promise((t=>setTimeout(t,0)))}))}v.generateMaze(),o.addEventListener("click",(t=>l(void 0,void 0,void 0,(function*(){const e=o.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/r),l=Math.floor((t.clientY-e.top)/r),n=v.getCell(i,l);n&&(n.highlighted=!n.highlighted,yield y())})))),u&&u.addEventListener("click",(()=>l(void 0,void 0,void 0,(function*(){h.cancelled=!1;const t=v.getEntranceCell(),e=(new Date).getTime();t&&(yield v.findSolution([t],y,h)),f=(new Date).getTime()-e,g&&(g.textContent=`Time Elapsed: ${f/1e3}s`),yield y()})))),c&&c.addEventListener("click",(()=>l(void 0,void 0,void 0,(function*(){v=new n.Maze(a,d,r),v.generateMaze(),yield y(),g&&(g.textContent="")})))),y()}},e={};!function i(l){var n=e[l];if(void 0!==n)return n.exports;var o=e[l]={exports:{}};return t[l].call(o.exports,o,o.exports,i),o.exports}(697)})();